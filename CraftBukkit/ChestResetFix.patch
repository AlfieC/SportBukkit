From 81ae8d5edfd35bb406b533c66812722314dbe31e Mon Sep 17 00:00:00 2001
From: mrapple <tony@oc.tc>
Date: Mon, 10 Sep 2012 16:20:27 -0500
Subject: [PATCH] Fix a player's container not being reset before opening a
 chest

---
 src/main/java/net/minecraft/server/BlockChest.java |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/src/main/java/net/minecraft/server/BlockChest.java b/src/main/java/net/minecraft/server/BlockChest.java
index d723be5..20c488e 100644
--- a/src/main/java/net/minecraft/server/BlockChest.java
+++ b/src/main/java/net/minecraft/server/BlockChest.java
@@ -310,6 +310,7 @@ public class BlockChest extends BlockContainer {
             if (world.isStatic) {
                 return true;
             } else {
+                entityhuman.activeContainer = entityhuman.defaultContainer; // CraftBukkit - reset container before opening new chest
                 entityhuman.openContainer((IInventory) object);
                 return true;
             }
--
1.7.4.4

